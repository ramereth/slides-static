<!DOCTYPE html>


<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>OpenStack vs. Ganeti &mdash; OpenStack vs. Ganeti</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/styles.css" type="text/css" />
    <link rel="stylesheet" href="_static/single.css" type="text/css" />
    
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2015.08.08',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/common.js"></script>
    
    <script type="text/javascript" src="_static/slides.js"></script>
    <script type="text/javascript" src="_static/sync.js"></script>
    <script type="text/javascript" src="_static/controller.js"></script>
    <script type="text/javascript" src="_static/init.js"></script>
    
    
    <link rel="top" title="OpenStack vs. Ganeti" href="#" /> 
  </head>
  <body>

<section
   id="slide_container"
   class='slides layout-regular'>


  
<article class="slide level-1" id="openstack-vs-ganeti">

<h1>OpenStack vs. Ganeti</h1>

<ul class="simple">
<li>Lance Albertson</li>
<li>Director, OSU Open Source Lab</li>
<li><a class="reference external" href="http://osuosl.org">http://osuosl.org</a></li>
<li>&#64;ramereth</li>
</ul>
<p><em>Attribution-ShareAlike CC BY-SA ©2015</em></p>




</article>
<article class="slide level-2" id="session-overview">

<h2>Session Overview</h2>

<ul class="simple">
<li>OpenStack quick overview</li>
<li>Ganeti overview</li>
<li>Ganeti walk-through</li>
<li>Comparing both</li>
</ul>




</article>
<article class="slide level-2" id="about-me">

<h2>About me</h2>

<ul class="simple">
<li>Lance Albertson</li>
<li>Director, OSU Open Source Lab (OSUOSL)<ul>
<li>Provide infrastructure hosting for FOSS projects</li>
<li>Linux Foundation, Python Software Foundation, Drupal, etc</li>
</ul>
</li>
<li>Ops guy</li>
<li>Ganeti user since 2009</li>
<li>OpenStack user since 2013</li>
<li><a class="reference external" href="http://osuosl.org">http://osuosl.org</a></li>
</ul>




</article>
<article class="slide level-2" id="virtualized-computing-resources">

<h2>Virtualized Computing Resources</h2>

<ul class="simple">
<li>Each organization has different needs</li>
<li>Some are small and simple</li>
<li>Others are more complex and larger</li>
<li>Cost is also a major factor (both in licenses and staff maintenence)</li>
</ul>




</article>
<article class="slide level-2" id="typical-solutions">

<h2>Typical Solutions</h2>

<ul class="simple">
<li>VMWare</li>
<li>VirtualBox</li>
<li>OpenStack</li>
<li>[insert favorite solution]</li>
</ul>




</article>
<article class="slide level-2" id="openstack-is-all-the-hype">

<h2>OpenStack is all the hype</h2>

<ul class="simple">
<li>Designed to scale and be an AWS replacement (almost)</li>
<li>Everyone is investing in it</li>
<li>Still maturing as a project</li>
<li>Includes a wide-array of features, many of which most people don't need</li>
</ul>




</article>
<article class="slide level-2" id="openstack-overview">

<h2>OpenStack Overview</h2>

<a class="reference internal image-reference" href="_images/openstack-arch.jpg"><img alt="_images/openstack-arch.jpg" src="_images/openstack-arch.jpg" style="width: 100%;" /></a>




</article>
<article class="slide level-2" id="openstack-pros">

<h2>OpenStack Pros</h2>

<ul class="simple">
<li>Standard Cloud API</li>
<li>Fast VM deployment and tear down</li>
<li>Very elastic computing needs</li>
<li>Large community support</li>
<li>Fast growing and new features constantly</li>
</ul>




</article>
<article class="slide level-2" id="openstack-cons">

<h2>OpenStack Cons</h2>

<ul class="simple">
<li>Extremely difficult to deploy and maintain</li>
<li>Lots of moving parts</li>
<li>Project is still maturing and unstable</li>
<li>Fits a very specific use-case (Cloud)</li>
<li>Requires more than one machine to effectively use</li>
</ul>




</article>
<article class="slide level-1" id="so-what-about-ganeti">

<h1>So what about Ganeti?</h1>





</article>
<article class="slide level-2" id="first-what-is-ganeti">

<h2>First, what is Ganeti?</h2>

<ul class="simple">
<li>Cluster management tool for virtual compute resources</li>
<li>IaaS solution that uses either KVM or Xen hypervisors</li>
<li>Provides fast and simple recovery from hardware failures</li>
<li>Primarily CLI driven, sysadmin focused</li>
<li>Supports live migration cluster re-balancing</li>
</ul>




</article>
<article class="slide level-2" id="what-isn-t-ganeti">

<h2>What isn't Ganeti?</h2>

<ul class="simple">
<li>Not an entire cloud-platform by itself (primarily only provides compute)</li>
<li>Doesn't provide object/image storage by default</li>
<li>Not meant to be directly interfaced with users</li>
</ul>




</article>
<article class="slide level-2" id="ganeti-overview">

<h2>Ganeti Overview</h2>

<a class="reference internal image-reference" href="_images/overview.svg"><img src="_images/overview.svg" width="100%" /></a>




</article>
<article class="slide level-2" id="project-background">

<h2>Project Background</h2>

<ul class="simple">
<li>Google funded project</li>
<li>Used widely internally at Google</li>
<li>Active community, mailing list and IRC</li>
<li>Started before libvirt/OpenStack</li>
<li>Primarily written in Python / Haskell</li>
<li>No central relational database</li>
<li>GanetiCon - Sept 15-17, 2015 - Prague (third developer summit)</li>
</ul>




</article>
<article class="slide level-2" id="ganeti-goals">

<h2>Ganeti Goals</h2>

<p><strong>Low Entry Level</strong></p>
<blockquote>
<div><ul class="simple">
<li>Easy to install, manage and upgrade</li>
<li>Architecture is fairly easy to understand</li>
</ul>
</div></blockquote>
<p><strong>Enterprise Scale</strong></p>
<blockquote>
<div><ul class="simple">
<li>Manage 1 to 200 within a single cluster</li>
</ul>
</div></blockquote>
<p><strong>Open Source Citizen</strong></p>
<blockquote>
<div><ul class="simple">
<li>Design and code discussions are open to the community</li>
<li>Welcome third-party projects</li>
</ul>
</div></blockquote>




</article>
<article class="slide level-2" id="architecture">

<h2>Architecture</h2>

<a class="reference internal image-reference" href="_images/architecture.svg"><img src="_images/architecture.svg" width="100%" /></a>
<ul class="simple">
<li>Clusters are comprised of nodes, one of which is master</li>
<li>Nodes can be split up into logical groups</li>
<li>Instances (guests) run on nodes</li>
</ul>




</article>
<article class="slide level-2" id="ganeti-terminology">

<h2>Ganeti Terminology</h2>

<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node:</th><td class="field-body">Virtualization host</td>
</tr>
<tr class="field-even field"><th class="field-name">Instance:</th><td class="field-body">Virtual Machine Guest</td>
</tr>
<tr class="field-odd field"><th class="field-name">Cluster:</th><td class="field-body">Set of nodes, managed as a collective</td>
</tr>
<tr class="field-even field"><th class="field-name">Node Group:</th><td class="field-body">homogeneous set of nodes (i.e. rack of nodes)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Job:</th><td class="field-body">Ganeti operation</td>
</tr>
</tbody>
</table>




</article>
<article class="slide level-2" id="storage-in-ganeti">

<h2>Storage in Ganeti</h2>

<ul class="simple">
<li>Disk templates</li>
<li>LVM, DRBD</li>
<li>RBD</li>
<li>File (both local and shared via NFS)</li>
<li>External storage provider for SAN's</li>
<li>Designed to be flexible</li>
</ul>




</article>
<article class="slide level-2" id="primary-secondary-concepts">

<h2>Primary &amp; Secondary Concepts</h2>

<a class="reference internal image-reference" href="_images/primary-secondary.svg"><img src="_images/primary-secondary.svg" width="100%" /></a>
<ul class="simple">
<li>Instances always run on primary node</li>
<li>Uses secondary node for replication when using DRBD template</li>
<li>Also works with RBD, ext and shared file templates</li>
</ul>




</article>
<article class="slide level-2" id="ganeti-walk-through">

<h2>Ganeti Walk-through</h2>

<div class="codeblock-sm highlight-python"><div class="highlight"><pre>root@node1:~# gnt-node list
Node              DTotal DFree MTotal MNode MFree Pinst Sinst
node1.example.org  26.0G 25.5G   744M  186M  587M     0     0
node2.example.org  26.0G 25.5G   744M  116M  650M     0     0

root@node1:~# gnt-os list
Name
image+cirros
image+default

root@node1:~# gnt-instance add -n node1 -o image+cirros -t plain -s 1G \
  --no-start instance1
Thu Jun  7 06:05:58 2015 * disk 0, vg ganeti, name 780af428-3942-4fa9-8307-1323de416519.disk0
Thu Jun  7 06:05:58 2015 * creating instance disks...
Thu Jun  7 06:05:58 2015 adding instance instance1.example.org to cluster config
Thu Jun  7 06:05:58 2015  - INFO: Waiting for instance instance1.example.org to sync disks.
Thu Jun  7 06:05:58 2015  - INFO: Instance instance1.example.org&#39;s disks are in sync.
Thu Jun  7 06:05:58 2015 * running the instance OS create scripts...

root@node1:~# gnt-instance list
Instance              Hypervisor OS           Primary_node      Status     Memory
instance1.example.org kvm        image+cirros node1.example.org ADMIN_down      -
</pre></div>
</div>




</article>
<article class="slide level-2" id="ganeti-walk-through-instance-info">

<h2>Ganeti Walk-through (Instance Info)</h2>

<div class="codeblock-sm highlight-python"><div class="highlight"><pre>root@node1:~# gnt-instance info instance1
Instance name: instance1.example.org
UUID: bb87da5b-05f9-4dd6-9bc9-48592c1e091f
Serial number: 1
Creation time: 2015-06-07 06:05:58
Modification time: 2015-06-07 06:05:58
State: configured to be down, actual state is down
  Nodes:
    - primary: node1.example.org
    - secondaries:
  Operating system: image+cirros
  Allocated network port: 11000
  Hypervisor: kvm
    - console connection: vnc to node1.example.org:11000 (display 5100)
…
Hardware:
    - VCPUs: 1
    - memory: 128MiB
    - NICs:
      - nic/0: MAC: aa:00:00:dd:ac:db, IP: None, mode: bridged, link: br0
  Disk template: plain
  Disks:
    - disk/0: lvm, size 1.0G
      access mode: rw
      logical_id:  ganeti/780af428-3942-4fa9-8307-1323de416519.disk0
      on primary:  /dev/ganeti/780af428-3942-4fa9-8307-1323de416519.disk0 (252:1)
</pre></div>
</div>




</article>
<article class="slide level-2" id="ganeti-walk-through-converting-disk-template">

<h2>Ganeti Walk-through (Converting disk template)</h2>

<div class="codeblock-sm highlight-python"><div class="highlight"><pre>root@node1:~# gnt-instance shutdown instance1
Waiting for job 11 for instance1.example.org ...

root@node1:~# gnt-instance modify -t drbd -n node2 instance1
Thu Jun  7 06:09:07 2015 Converting template to drbd
Thu Jun  7 06:09:08 2015 Creating additional volumes...
Thu Jun  7 06:09:08 2015 Renaming original volumes...
Thu Jun  7 06:09:08 2015 Initializing DRBD devices...
Thu Jun  7 06:09:09 2015  - INFO: Waiting for instance instance1.example.org to sync disks.
Thu Jun  7 06:09:11 2015  - INFO: - device disk/0:  5.10% done, 20s remaining (estimated)
Thu Jun  7 06:09:31 2015  - INFO: - device disk/0: 86.00% done, 3s remaining (estimated)
Thu Jun  7 06:09:34 2015  - INFO: - device disk/0: 98.10% done, 0s remaining (estimated)
Thu Jun  7 06:09:34 2015  - INFO: Instance instance1.example.org&#39;s disks are in sync.
Modified instance instance1
 - disk_template -&gt; drbd
Please don&#39;t forget that most parameters take effect only at the next start of the instance.
</pre></div>
</div>




</article>
<article class="slide level-2" id="ganeti-walk-through-live-migration">

<h2>Ganeti Walk-through (Live migration)</h2>

<div class="codeblock-sm highlight-python"><div class="highlight"><pre>root@node1:~# gnt-instance start instance1
Waiting for job 14 for instance1.example.org …

root@node1:~# gnt-instance migrate -f instance1
Thu Jun  7 06:10:38 2015 Migrating instance instance1.example.org
Thu Jun  7 06:10:38 2015 * checking disk consistency between source and target
Thu Jun  7 06:10:38 2015 * switching node node1.example.org to secondary mode
Thu Jun  7 06:10:38 2015 * changing into standalone mode
Thu Jun  7 06:10:38 2015 * changing disks into dual-master mode
Thu Jun  7 06:10:39 2015 * wait until resync is done
Thu Jun  7 06:10:39 2015 * preparing node1.example.org to accept the instance
Thu Jun  7 06:10:39 2015 * migrating instance to node1.example.org
Thu Jun  7 06:10:44 2015 * switching node node2.example.org to secondary mode
Thu Jun  7 06:10:44 2015 * wait until resync is done
Thu Jun  7 06:10:44 2015 * changing into standalone mode
Thu Jun  7 06:10:45 2015 * changing disks into single-master mode
Thu Jun  7 06:10:46 2015 * wait until resync is done
Thu Jun  7 06:10:46 2015 * done
</pre></div>
</div>




</article>
<article class="slide level-2" id="common-use-cases-for-ganeti">

<h2>Common Use Cases for Ganeti</h2>

<ul class="simple">
<li>Cheap, stable and reliable virtual compute resources</li>
<li>Hosting web sites and other misc services in a private</li>
<li>Useful for hosting &quot;pet&quot; virtual machines</li>
<li>Need a highly reliable IaaS</li>
<li>Small to medium size organizations with few sysadmins</li>
</ul>




</article>
<article class="slide level-2" id="ganeti-pros">

<h2>Ganeti Pros</h2>

<ul class="simple">
<li>Architecture is fairly easy to deploy and understand</li>
<li>Requires a minimal staff to maintain and upgrade</li>
<li>Scales well for small/medium organization needs</li>
<li>Highly customizable backend</li>
<li>Built-in redundancy</li>
<li>It just works!</li>
</ul>




</article>
<article class="slide level-2" id="ganeti-cons">

<h2>Ganeti Cons</h2>

<ul class="simple">
<li>No GUI frontend by default (third party projects do have some)</li>
<li>API isn't very cloud compatible</li>
<li>API not intended to be open to general users of the platform</li>
<li>Management becomes slower the larger the cluster gets (although, its improving)</li>
</ul>




</article>
<article class="slide level-2" id="ganeti-synnefo-openstack-ish">

<h2>Ganeti + Synnefo = OpenStack-ish</h2>

<p><em>Synnefo is a complete open source IaaS cloud stack written in Python that
provides Compute, Network, Image, Volume and Object Storage services</em></p>
<p><a class="reference external" href="https://www.synnefo.org">https://www.synnefo.org</a></p>
<ul class="simple">
<li>Manages multiple Ganeti clusters</li>
<li>Provides API/Accounting/Quota/Block/Object storage</li>
<li>Written in Python by GRNET</li>
<li>Transforms Ganeti into an OpenStack/AWS-like platform</li>
</ul>




</article>
<article class="slide level-2" id="synnefo-architecture">

<h2>Synnefo Architecture</h2>

<a class="reference internal image-reference" href="_images/snf-architecture.png"><img alt="_images/snf-architecture.png" src="_images/snf-architecture.png" style="width: 100%;" /></a>




</article>
<article class="slide level-2" id="how-the-osl-is-using-ganeti">

<h2>How the OSL is using Ganeti</h2>

<ul class="simple">
<li>Hosting all of the &quot;Pet&quot; VMs we still need</li>
<li>Project specific VM(s)</li>
<li>Mix of shared web infrastructure (load balancers, web frontends, backend
services)</li>
<li>OpenStack controller node (yes!)</li>
<li>Whenever we want to host something that needs to have high reliability</li>
</ul>




</article>
<article class="slide level-2" id="how-the-osl-is-using-openstack">

<h2>How the OSL is using OpenStack</h2>

<ul class="simple">
<li>Two clusters: OSL-internal x86 / Public POWER8 based</li>
<li>OSL-internal<ul>
<li>Chef cookbook integration testing</li>
<li>Developer staging/development VMs</li>
<li>Multi-node testing</li>
</ul>
</li>
<li>POWER8<ul>
<li>FOSS project ppc64/ppc64le porting efforts</li>
<li>POWER8 software testing</li>
</ul>
</li>
</ul>




</article>
<article class="slide level-2" id="openstack-ganeti-side-by-side">

<h2>OpenStack / Ganeti side-by-side</h2>

<p><strong>OpenStack:</strong></p>
<ul class="simple">
<li>Pro: Great for quickly creating test vms for integration testing</li>
<li>Con: Extremely complicated to setup and maintain</li>
</ul>
<p><strong>Ganeti:</strong></p>
<ul class="simple">
<li>Pro: Extremely fault tolerant and stable VM hosting and easy to use/maintain</li>
<li>Con: Doesn't scale well for cloud-specific needs</li>
</ul>




</article>
<article class="slide level-2" id="future-plans">

<h2>Future plans</h2>

<ul class="simple">
<li>Open up OpenStack cluster to our hosted projects later this year</li>
<li>Continue using Ganeti along-side OpenStack</li>
<li>Research using ManageIQ as an interface between both</li>
<li>Continue supporting both platforms long term</li>
</ul>




</article>
<article class="slide level-2" id="final-summary">

<h2>Final Summary</h2>

<ul class="simple">
<li>Both fill a specific niche in the ecosystem</li>
<li>OpenStack will eventually mature and become more stable</li>
<li>Give Ganeti a look, might be what you're looking for if OpenStack is too
complicated</li>
<li>Make sure you experiment with both and fully understand their maintenence needs</li>
</ul>




</article>
<article class="slide level-2" id="questions">

<h2>Questions?</h2>

<ul class="simple">
<li>Lance Albertson</li>
<li><a class="reference external" href="mailto:lance&#37;&#52;&#48;osuosl&#46;org">lance<span>&#64;</span>osuosl<span>&#46;</span>org</a></li>
<li>&#64;ramereth</li>
<li><a class="reference external" href="http://osuosl.org">http://osuosl.org</a></li>
<li><a class="reference external" href="http://www.ganeti.org/">http://www.ganeti.org/</a></li>
<li><a class="reference external" href="http://lancealbertson.com">http://lancealbertson.com</a></li>
</ul>
<p><em>Attribution-ShareAlike CC BY-SA ©2015</em></p>




</article>

</section>

<section id="slide_notes">

</section>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
  var pageTracker = _gat._getTracker("UA-7186407-1");
  pageTracker._trackPageview();
} catch(err) {}</script>
  </body>
</html>
